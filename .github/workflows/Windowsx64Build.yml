name: Universal Build

on:
  # 核心配置：允许不指定分支的手动触发 ▼
  workflow_dispatch: {}  # 空参数表示无需输入任何参数

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    # 自动检出当前分支的代码 ▼
    - name: 🛎️ 智能代码检出
      uses: actions/checkout@v4
      with:
        # 关键参数：自动识别触发分支
        ref: ${{ github.ref_name }}
        # 避免浅克隆导致的问题
        fetch-depth: 0

    - name: 🔍 验证分支信息
      run: |
        echo "当前分支: ${{ github.ref_name }}"
        echo "提交哈希: ${{ github.sha }}"
