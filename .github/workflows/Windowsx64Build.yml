name: RustDesk Windows Build

on:
  workflow_dispatch: {}

jobs:
  build:
    runs-on: windows-latest  # å¿…é¡»ä½¿ç”¨Windowsç¯å¢ƒ
    steps:
    - name: ğŸ›ï¸ æ£€å‡ºä»£ç 
      uses: actions/checkout@v4
      with:
        ref: ${{ github.ref_name }}
        fetch-depth: 0

    - name: ğŸ¦€ å®‰è£…Rustå·¥å…·é“¾
      uses: actions-rs/toolchain@v1
      with:
        profile: minimal
        target: x86_64-pc-windows-msvc  # å…³é”®ç›®æ ‡å¹³å°
        override: true

    - name: ğŸ”§ æ„å»ºReleaseç‰ˆ
      run: |
        cargo build --release --target x86_64-pc-windows-msvc
        cd target/x86_64-pc-windows-msvc/release
        dir rustdesk*.exe  # éªŒè¯ç”Ÿæˆæ–‡ä»¶

    - name: ğŸ“¦ æ‰“åŒ…äº§ç‰©
      uses: actions/upload-artifact@v3
      with:
        name: rustdesk-bin
        path: |
          target/x86_64-pc-windows-msvc/release/rustdesk.exe
          target/x86_64-pc-windows-msvc/release/rustdesk.dll
